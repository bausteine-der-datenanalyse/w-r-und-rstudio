"0","#| echo: false"
"0",""
"0","# Dataframes für Deutschlandkarte"
"0","d_de <- gisco_get_nuts(country = ""Germany"", nuts_level = 0, resolution = 03)"
"0","d_bl <- gisco_get_nuts(country = ""Germany"", nuts_level = 2, resolution = 03)"
"0",""
"0","# Dataframes für ausgewählte Stationen und Jahreswerte"
"0","d_stat_a <- d_stat |> filter(Station %in% unique(d_ns$Station))"
"0","d_ns_jahr <- d_ns |>"
"0"," filter(!is.na(Niederschlag)) |>"
"0"," group_by(Station, Jahr) |>"
"0"," summarise(n = n(), Niederschlag = sum(Niederschlag)) |>"
"0"," filter(n >= 365) |>"
"0"," summarise(n = n(), Niederschlag = mean(Niederschlag)) |>"
"0"," ungroup()"
"0",""
"0","# Plot auf Landkarte"
"0","p1 <- ggplot() +"
"0"," geom_sf(data = d_bl, fill = NA, color = ""lightcoral"", linewidth = 0.5) +"
"0"," geom_sf(data = d_de, fill = NA, color = ""slategray"", linewidth = 0.75) +"
"0"," geom_sf(data = d_stat, alpha = 0.2) +"
"0"," geom_sf("
"0","  data = d_stat_a, mapping = aes(fill = Station),"
"0","  shape = 21, color = ""black"", size = 2.5, show.legend = FALSE"
"0"," ) +"
"0"," theme_void()"
"0",""
"0","# Plot der Niederschläge"
"0","p2 <- ggplot(data = d_ns_jahr) +"
"0"," geom_col("
"0","  mapping = aes(x = reorder(Station, desc(Niederschlag)), y = Niederschlag, fill = Station),"
"0","  color = ""black"", show.legend = FALSE"
"0"," ) +"
"0"," labs(title = ""Mittlerer jährlicher Niederschlag"", x = NULL, y = NULL) +"
"0"," theme(axis.text.x = element_text(angle = 30, vjust = 1, hjust = 1))"
"0",""
"0","# Darstellen"
"0","p1 + p2"
