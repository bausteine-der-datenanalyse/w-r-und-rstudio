{
  "hash": "236abb9ecd7a7047e97e5d791bdf0ea9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Grundlagen von ggplot2\"\nnumber-offset: [3, 0]\n---\n\n\n\n::: {.cell}\n\n:::\n\n\n\n## Ein Beispiel\n\n\n### Zusammenhang zwischen Wirtschaftskraft und Treibhausgasemissionen im Jahr 2012\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = d_wb_2012) +\n  geom_point(mapping = aes(x=gdp, y=gge, fill=region, size=pop), shape=21) +\n  scale_x_log10() + scale_y_log10() +\n  labs(x=\"Bruttoinlandsprodukt\", y=\"Treibhausgasemissionen\", title=\"Jahr 2012\")\n```\n\n::: {.cell-output-display}\n![](ggplot2_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n### Aufbau der Anweisung\n\n![](bilder/plot-beispiel.svg)\n\n1.  Einen Plot mit ggplot2 erstellen\n2.  Datensatz, der visualisiert werden soll\n3.  Zuordnung von Merkmalen zu Eigenschaften geometrischer Objekte\n4.  Geometrische Objekte\n5.  Skalen (später)\n6.  Beschriftung (später)\n\n\n## Was ist ggplot2?\n\n\n### Ursprung\n\n![](bilder/ggplot.svg)\n\n- Umfangreiches Paket zur Visualisierung von Daten\n- Entwickelt von Hadley Wickham (Doktorarbeit)\n- Basiert auf dem Buch 'The Grammar of Graphics' von Leland Wilkinson\n- Sehr strukturiert, aber man muss sich hineindenken\n- Mit Quellcode frei verfügbar\n- Eine schöne Sammlung von Beispielen gibt es [hier](https://www.r-graph-gallery.com)\n\n\n### Genereller Aufbau einer ggplot2 Anweisung\n\n<br/><br/>\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = <DATA>) +\n  geom_<GEOM1>(mapping = aes(<AESTHETICS>), <ARGUMENTS>) +\n  coord_<COORD>(<ARGUMENTS)> +\n  facet_wrap(<ARGUMENTS>) +\n  scale_<SCALE>(<ARGUMENTS>) +\n  labs(<LABELS>) +\n  theme(<THEME SETTINGS>)\n```\n:::\n\n\n<br/><br/>\n\n→ Am Ende des Semesters werden Sie das verstehen!\n\n## Datensatz für diese Folien\n\n\n### Daten laden und anzeigen\n\n#### Daten aus Datei laden\n\n\n::: {.cell}\n\n```{.r .cell-code}\nload(\"daten/data-lecture.Rdata\")\n```\n:::\n\n\n<br/>\n\n#### Dataframe anzeigen\n\n\n::: {.cell}\n\n```{.r .cell-code}\nshow(d_wb_2012)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 170 × 7\n    year country                  pop      gge     gdp region              ig   \n   <int> <chr>                  <dbl>    <dbl>   <dbl> <chr>               <fct>\n 1  2012 Afghanistan         31161376  18169.  2.00e10 South Asia          Low …\n 2  2012 Albania              2900401   8899.  1.23e10 Europe & Central A… Uppe…\n 3  2012 Algeria             37383887 176471.  2.09e11 Middle East & Nort… Uppe…\n 4  2012 American Samoa         55667     58.8 6.44e 8 East Asia & Pacific Uppe…\n 5  2012 Angola              25107931  41657.  1.28e11 Sub-Saharan Africa  Lowe…\n 6  2012 Antigua and Barbuda    90409    553.  1.21e 9 Latin America & Ca… High…\n 7  2012 Argentina           41733271 380295.  5.46e11 Latin America & Ca… Uppe…\n 8  2012 Armenia              2884229  12319.  1.06e10 Europe & Central A… Uppe…\n 9  2012 Australia           22733465 761686.  1.55e12 East Asia & Pacific High…\n10  2012 Austria              8429991  90460.  4.09e11 Europe & Central A… High…\n# ℹ 160 more rows\n```\n\n\n:::\n:::\n\n\n\n### Inhalt von Dataframe `d_wb_2012`\n\n| Spalte | Deutsch | Englisch (Originaltitel) |\n|------------------------|------------------------|------------------------|\n| year | Jahr | Year |\n| country | Land | Country |\n| pop | Bevölkerung | Population, total |\n| gge | Treibhausgasemissionen kt CO2 äquivalent | Total greenhouse gas emissions kt of CO2 equivalent |\n| gdp | Bruttoinlandsprodukt | GDP (current US\\$) |\n| region | Region | Region |\n| ig | Einkommensgruppe | Income group |\n\n: {tbl-colwidths=\"[20,40,40]\"}\n\n\n## Funktionsweise von ggplot\n\n\n### Wie funktioniert ggplot?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = d_wb_2012) +\n  geom_point(mapping = aes(x=gdp, y=gge, fill=region, size=pop), shape=21) +\n  scale_x_log10() + scale_y_log10() +\n  labs(x=\"Bruttoinlandsprodukt\", y=\"Treibhausgasemissionen\", title=\"2012\")\n```\n:::\n\n\n- Plot setzt sich aus Elementen zusammen, die mit `+` verbunden werden\n- `ggplot(...)` erzeugt leere Zeichenfläche\n  - Dabei wird angegeben, welche Daten geplottet werden sollen\n- `geom_point(...)` fügt Ebene (Layer) mit Punkten (geometrische Objekte) hinzu\n  - Es gibt viele andere geometrische Objekte (Linien, Balken, Text, ...)\n  - Das Mapping verknüpft Daten mit visuellen Eigenschaften der Objekte\n- Es folgen Einstellungen für Achsen, Beschriftungen, etc.\n\n\n### Daten und visuelle Eigenschaften\n\n![](bilder/mapping.svg)\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngoem_point(mapping = aes(x = A, y = B, color = C, size = D))\n```\n:::\n\n\n-   Punkt hat visuelle Eigenschaften: x, y, Größe, Farbe\n-   Mapping legt fest, welches Merkmal auf welche visuelle Eigenschaft abgebildet wird\n\n→ Visuelle Eigenschaften heißen in ggplot Aesthetics (AES)\n\n\n### Datensatz für Beispiel erstellen und anzeigen\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd_bsp <- tibble(\n  A = c(1, 3, 2), \n  B = c(1, 2, 3), \n  C = c('u', 'v', 'u'), \n  D = c(5, 2, 4)\n)\n\nkable(d_bsp)\n```\n\n::: {.cell-output-display}\n\n\n|  A|  B|C  |  D|\n|--:|--:|:--|--:|\n|  1|  1|u  |  5|\n|  3|  2|v  |  2|\n|  2|  3|u  |  4|\n\n\n:::\n:::\n\n\n\n### Datensatz für Beispiel Plotten\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = d_bsp) +\n  geom_point(mapping = aes(x = A, y = B, color = C, size = D))\n```\n\n::: {.cell-output-display}\n![](ggplot2_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n### _Geoms_ und _Aesthetics_\n\n<br/><br/>\n\n![](bilder/aesthetics.svg)\n\n\n### Beispiel mit Weltbankdaten\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = d_wb_2012) +\n  geom_point(mapping = aes(x=gdp, y=gge, color=region, size=pop))\n```\n\n::: {.cell-output-display}\n![](ggplot2_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n### Beispiel mit Weltbankdaten\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = d_wb_2012) +\n  geom_point(mapping = aes(x=gdp, y=gge, color=region, size=pop))\n```\n:::\n\n\n- `geom_point(...)` sagt, dass Punkte geplottet werden sollen\n- Parameter `mapping` definiert Zuordnung von *Merkmalen* auf *visuelle Eigenschaften*\n- Zuordnung wird mit der Funktion `aes(...)` erzeugt. Hier:\n  - Koordinaten nach BIP (`gdp`) und Emission (`gge`)\n  - Farbe nach Region (`region`)\n  - Größe entsprechend Bevölkerung (`pop`)\n\n\n### Beispiel mit Weltbankdaten (logarithmische Skala)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = d_wb_2012) +\n  geom_point(mapping = aes(x=gdp, y=gge, color=region, size=pop)) +\n  scale_x_log10() + scale_y_log10()\n```\n\n::: {.cell-output-display}\n![](ggplot2_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n",
    "supporting": [
      "ggplot2_files\\figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}